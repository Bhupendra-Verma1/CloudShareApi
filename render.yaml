services:
  - type: web
    name: cloudshare-api
    env: docker
    region: oregon
    plan: free

    dockerfilePath: ./Dockerfile

    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod

      # MongoDB
      - key: MONGODB_URI
        sync: false

      # Supabase
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false
      - key: SUPABASE_BUCKET
        sync: false

      # Clerk
      - key: CLERK_ISSUER
        sync: false
      - key: CLERK_JWKS_URL
        sync: false
      - key: CLERK_WEBHOOK_SECRET
        sync: false

      # Razorpay
      - key: RAZORPAY_KEY_ID
        sync: false
      - key: RAZORPAY_KEY_SECRET
        sync: false

      # Health check secret
      - key: HEALTH_CHECK_SECRET
        sync: false

    healthCheckPath: /healthz
